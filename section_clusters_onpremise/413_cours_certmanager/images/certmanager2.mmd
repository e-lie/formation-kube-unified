graph TB
    subgraph issuers["🔐 Sources de Certificats"]
        issuer[Issuer<br/>---<br/>Namespace-scoped]
        clusterissuer[ClusterIssuer<br/>---<br/>Cluster-wide]
    end
    
    subgraph cert_resources["📜 Demandes de Certificats"]
        certificate[Certificate<br/>---<br/>spec:<br/>- secretName<br/>- dnsNames<br/>- duration<br/>- renewBefore<br/>- issuerRef]
        
        certrequest[CertificateRequest<br/>---<br/>spec:<br/>- request CSR base64<br/>- issuerRef<br/>- usages]
    end
    
    subgraph acme_resources["🌐 Ressources ACME"]
        order[Order<br/>---<br/>Une commande ACME<br/>spec:<br/>- request CSR<br/>- dnsNames]
        
        challenge[Challenge<br/>---<br/>Un défi de validation<br/>spec:<br/>- type HTTP-01/DNS-01<br/>- token<br/>- key]
    end
    
    subgraph k8s_resources["📦 Ressources Kubernetes"]
        secret[Secret<br/>---<br/>type: kubernetes.io/tls<br/>data:<br/>- tls.crt<br/>- tls.key<br/>- ca.crt]
        
        ingress[Ingress<br/>---<br/>spec.tls:<br/>- secretName<br/>annotations:<br/>cert-manager.io/issuer]
    end
    
    certificate -->|références| issuer
    certificate -->|références| clusterissuer
    certificate -->|crée| certrequest
    certificate -->|stocke dans| secret
    
    certrequest -->|si ACME| order
    order -->|crée| challenge
    
    certrequest -->|une fois signé<br/>met à jour| certificate
    
    ingress -->|annotation<br/>déclenche création| certificate
    ingress -->|utilise| secret
    
    challenge -->|HTTP-01<br/>utilise| ingress
    
    style certificate fill:#326CE5,color:#fff
    style certrequest fill:#1976D2,color:#fff
    style issuer fill:#7B1FA2,color:#fff
    style clusterissuer fill:#7B1FA2,color:#fff
    style order fill:#FF6F00,color:#fff
    style challenge fill:#FFB300,color:#000
    style secret fill:#388E3C,color:#fff
    style ingress fill:#00897B,color:#fff